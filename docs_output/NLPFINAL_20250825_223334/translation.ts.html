<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>translation.ts - Documentation</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        h1 { color: #333; border-bottom: 3px solid #667eea; padding-bottom: 15px; }
        h2 { color: #666; margin-top: 30px; }
        .file-info { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 10px; margin: 20px 0; }
        .ai-summary { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 10px; margin: 20px 0; }
        .code-container { background: #f8f8f8; border-radius: 10px; overflow-x: auto; margin: 20px 0; box-shadow: inset 0 2px 5px rgba(0,0,0,0.1); }
        .functions, .classes { margin: 20px 0; }
        .function-item, .class-item { background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
        .back-link { display: inline-block; margin-bottom: 20px; color: white; text-decoration: none; background: #667eea; padding: 10px 20px; border-radius: 25px; transition: background 0.3s; }
        .back-link:hover { background: #764ba2; }
        .language-badge { display: inline-block; background: #667eea; color: white; padding: 6px 12px; border-radius: 15px; font-size: 14px; margin-left: 10px; }
        pre { margin: 0; padding: 15px; }
        code { font-family: 'Consolas', 'Monaco', 'Courier New', monospace; }
        .ai-description { background: rgba(102, 126, 234, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 3px solid #667eea; }
        .docstring { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0; border-left: 3px solid #28a745; }
        .element-header { display: flex; align-items: center; margin-bottom: 10px; }
        .element-header h4 { margin: 0; flex: 1; }
        .line-number { background: #6c757d; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Repository</a>
        
        <h1>üíô translation.ts <span class="language-badge">TypeScript</span></h1>
        
        <div class="file-info">
            <p><strong>üìç Path:</strong> src/services/translation.ts</p>
            <p><strong>üìè Size:</strong> 4152 bytes</p>
            <p><strong>üìä Lines:</strong> 117</p>
            <p><strong>üè∑Ô∏è Language:</strong> TypeScript</p>
        </div>
        
        
                <div class="ai-summary">
                    <h3>ü§ñ AI Summary</h3>
                    <p>Unknown module containing code for translation ts.</p>
                </div>
                
        
        
        
        
        <h2>üìã Source Code</h2>
        <div class="code-container">
            <pre><code><span style="color: #666; margin-right: 10px;">   1</span><br><span style="color: #666; margin-right: 10px;">   2</span><br><span style="color: #666; margin-right: 10px;">   3</span>import axios from 'axios';<br><span style="color: #666; margin-right: 10px;">   4</span>import type { TranslationResult } from '../types/translation';<br><span style="color: #666; margin-right: 10px;">   5</span>import { calculateTranslationConfidence } from '../utils/metrics';<br><span style="color: #666; margin-right: 10px;">   6</span><br><span style="color: #666; margin-right: 10px;">   7</span>const API_ENDPOINTS = {<br><span style="color: #666; margin-right: 10px;">   8</span>  RBMT: 'https://apertium.org/apy/translate',<br><span style="color: #666; margin-right: 10px;">   9</span>  SMT: 'https://translate.googleapis.com/translate_a/single',<br><span style="color: #666; margin-right: 10px;">  10</span>  EBMT: 'https://api.mymemory.translated.net/get',<br><span style="color: #666; margin-right: 10px;">  11</span>  NMT: 'https://api-inference.huggingface.co/models/Helsinki-NLP/opus-mt-en-fr',<br><span style="color: #666; margin-right: 10px;">  12</span>};<br><span style="color: #666; margin-right: 10px;">  13</span><br><span style="color: #666; margin-right: 10px;">  14</span>const HUGGING_FACE_API_KEY = '';<br><span style="color: #666; margin-right: 10px;">  15</span><br><span style="color: #666; margin-right: 10px;">  16</span>async function measureApiCall<T>(<br><span style="color: #666; margin-right: 10px;">  17</span>  apiCall: () => Promise<T><br><span style="color: #666; margin-right: 10px;">  18</span>): Promise<{ result: T; responseTime: number }> {<br><span style="color: #666; margin-right: 10px;">  19</span>  const start = performance.now();<br><span style="color: #666; margin-right: 10px;">  20</span>  const result = await apiCall();<br><span style="color: #666; margin-right: 10px;">  21</span>  const responseTime = performance.now() - start;<br><span style="color: #666; margin-right: 10px;">  22</span>  return { result, responseTime };<br><span style="color: #666; margin-right: 10px;">  23</span>}<br><span style="color: #666; margin-right: 10px;">  24</span><br><span style="color: #666; margin-right: 10px;">  25</span>export const translateText = async (text: string): Promise<TranslationResult[]> => {<br><span style="color: #666; margin-right: 10px;">  26</span>  try {<br><span style="color: #666; margin-right: 10px;">  27</span>    const apiCalls = [<br><span style="color: #666; margin-right: 10px;">  28</span>      // 1Ô∏è‚É£ Rule-Based Machine Translation (RBMT) - Apertium API<br><span style="color: #666; margin-right: 10px;">  29</span>      measureApiCall(() =><br><span style="color: #666; margin-right: 10px;">  30</span>        axios.get(API_ENDPOINTS.RBMT, { params: { q: text, langpair: 'en|fr' } })<br><span style="color: #666; margin-right: 10px;">  31</span>      ).then(({ result: res, responseTime }) => ({<br><span style="color: #666; margin-right: 10px;">  32</span>        model: 'RBMT',<br><span style="color: #666; margin-right: 10px;">  33</span>        translation: res.data.responseData.translatedText || 'Error translating',<br><span style="color: #666; margin-right: 10px;">  34</span>        fluencyScore: 0.75,<br><span style="color: #666; margin-right: 10px;">  35</span>        responseTime,<br><span style="color: #666; margin-right: 10px;">  36</span>        confidence: 0.8<br><span style="color: #666; margin-right: 10px;">  37</span>      })).catch(() => null),<br><span style="color: #666; margin-right: 10px;">  38</span><br><span style="color: #666; margin-right: 10px;">  39</span>      // 2Ô∏è‚É£ Statistical Machine Translation (SMT) - Google Translate API<br><span style="color: #666; margin-right: 10px;">  40</span>      measureApiCall(() =><br><span style="color: #666; margin-right: 10px;">  41</span>        axios.get(API_ENDPOINTS.SMT, {<br><span style="color: #666; margin-right: 10px;">  42</span>          params: {<br><span style="color: #666; margin-right: 10px;">  43</span>            client: 'gtx',<br><span style="color: #666; margin-right: 10px;">  44</span>            sl: 'en',<br><span style="color: #666; margin-right: 10px;">  45</span>            tl: 'fr',<br><span style="color: #666; margin-right: 10px;">  46</span>            dt: 't',<br><span style="color: #666; margin-right: 10px;">  47</span>            q: text<br><span style="color: #666; margin-right: 10px;">  48</span>          }<br><span style="color: #666; margin-right: 10px;">  49</span>        })<br><span style="color: #666; margin-right: 10px;">  50</span>      ).then(({ result: res, responseTime }) => ({<br><span style="color: #666; margin-right: 10px;">  51</span>        model: 'SMT',<br><span style="color: #666; margin-right: 10px;">  52</span>        translation: res.data[0][0][0] || 'Error translating',<br><span style="color: #666; margin-right: 10px;">  53</span>        fluencyScore: 0.8,<br><span style="color: #666; margin-right: 10px;">  54</span>        responseTime,<br><span style="color: #666; margin-right: 10px;">  55</span>        confidence: 0.85<br><span style="color: #666; margin-right: 10px;">  56</span>      })).catch(() => null),<br><span style="color: #666; margin-right: 10px;">  57</span><br><span style="color: #666; margin-right: 10px;">  58</span>      // 3Ô∏è‚É£ Example-Based Machine Translation (EBMT) - MyMemory API<br><span style="color: #666; margin-right: 10px;">  59</span>      measureApiCall(() =><br><span style="color: #666; margin-right: 10px;">  60</span>        axios.get(API_ENDPOINTS.EBMT, { params: { q: text, langpair: 'en|fr' } })<br><span style="color: #666; margin-right: 10px;">  61</span>      ).then(({ result: res, responseTime }) => ({<br><span style="color: #666; margin-right: 10px;">  62</span>        model: 'EBMT',<br><span style="color: #666; margin-right: 10px;">  63</span>        translation: res.data.responseData.translatedText || 'Error translating',<br><span style="color: #666; margin-right: 10px;">  64</span>        fluencyScore: 0.7,<br><span style="color: #666; margin-right: 10px;">  65</span>        responseTime,<br><span style="color: #666; margin-right: 10px;">  66</span>        confidence: 0.75<br><span style="color: #666; margin-right: 10px;">  67</span>      })).catch(() => null),<br><span style="color: #666; margin-right: 10px;">  68</span><br><span style="color: #666; margin-right: 10px;">  69</span>      // 4Ô∏è‚É£ Neural Machine Translation (NMT) - Hugging Face API<br><span style="color: #666; margin-right: 10px;">  70</span>      measureApiCall(() =><br><span style="color: #666; margin-right: 10px;">  71</span>        axios.post(API_ENDPOINTS.NMT, { inputs: text }, {<br><span style="color: #666; margin-right: 10px;">  72</span>          headers: { Authorization: `Bearer ${HUGGING_FACE_API_KEY}` }<br><span style="color: #666; margin-right: 10px;">  73</span>        })<br><span style="color: #666; margin-right: 10px;">  74</span>      ).then(({ result: res, responseTime }) => ({<br><span style="color: #666; margin-right: 10px;">  75</span>        model: 'NMT',<br><span style="color: #666; margin-right: 10px;">  76</span>        translation: res.data[0]?.translation_text || 'Error translating',<br><span style="color: #666; margin-right: 10px;">  77</span>        fluencyScore: 0.85,<br><span style="color: #666; margin-right: 10px;">  78</span>        responseTime,<br><span style="color: #666; margin-right: 10px;">  79</span>        confidence: 0.9<br><span style="color: #666; margin-right: 10px;">  80</span>      })).catch(() => null)<br><span style="color: #666; margin-right: 10px;">  81</span>    ];<br><span style="color: #666; margin-right: 10px;">  82</span><br><span style="color: #666; margin-right: 10px;">  83</span>    const responses = await Promise.all(apiCalls);<br><span style="color: #666; margin-right: 10px;">  84</span>    const validResponses = responses.filter(Boolean);<br><span style="color: #666; margin-right: 10px;">  85</span><br><span style="color: #666; margin-right: 10px;">  86</span>    // 5Ô∏è‚É£ Hybrid Machine Translation (HMT)<br><span style="color: #666; margin-right: 10px;">  87</span>    const rbmtResult = validResponses.find(res => res?.model === 'RBMT')?.translation || text;<br><span style="color: #666; margin-right: 10px;">  88</span>    const nmtResult = validResponses.find(res => res?.model === 'NMT')?.translation || text;<br><span style="color: #666; margin-right: 10px;">  89</span><br><span style="color: #666; margin-right: 10px;">  90</span>    const hybridStart = performance.now();<br><span style="color: #666; margin-right: 10px;">  91</span>    const hybridTranslation = `${rbmtResult} | ${nmtResult}`;<br><span style="color: #666; margin-right: 10px;">  92</span>    const hybridResponseTime = performance.now() - hybridStart;<br><span style="color: #666; margin-right: 10px;">  93</span><br><span style="color: #666; margin-right: 10px;">  94</span>    // Add hybrid result to valid responses before calculating overall confidence<br><span style="color: #666; margin-right: 10px;">  95</span>    validResponses.push({<br><span style="color: #666; margin-right: 10px;">  96</span>      model: 'Hybrid',<br><span style="color: #666; margin-right: 10px;">  97</span>      translation: hybridTranslation,<br><span style="color: #666; margin-right: 10px;">  98</span>      fluencyScore: 0.82,<br><span style="color: #666; margin-right: 10px;">  99</span>      responseTime: hybridResponseTime ? hybridResponseTime>0 : 900,<br><span style="color: #666; margin-right: 10px;"> 100</span>      confidence: 0.85 // Initial confidence score<br><span style="color: #666; margin-right: 10px;"> 101</span>    });<br><span style="color: #666; margin-right: 10px;"> 102</span><br><span style="color: #666; margin-right: 10px;"> 103</span>    // Calculate confidence scores based on translation similarity for all translations including hybrid<br><span style="color: #666; margin-right: 10px;"> 104</span>    const translations = validResponses.map(r => r!.translation);<br><span style="color: #666; margin-right: 10px;"> 105</span>    const overallConfidence = calculateTranslationConfidence(translations);<br><span style="color: #666; margin-right: 10px;"> 106</span><br><span style="color: #666; margin-right: 10px;"> 107</span>    // Update confidence scores based on similarity for all models<br><span style="color: #666; margin-right: 10px;"> 108</span>    return validResponses.map(response => ({<br><span style="color: #666; margin-right: 10px;"> 109</span>      ...response!,<br><span style="color: #666; margin-right: 10px;"> 110</span>      confidence: (response!.confidence + overallConfidence) / 2<br><span style="color: #666; margin-right: 10px;"> 111</span>    }));<br><span style="color: #666; margin-right: 10px;"> 112</span>  } catch (error) {<br><span style="color: #666; margin-right: 10px;"> 113</span>    console.error('Error fetching translations:', error);<br><span style="color: #666; margin-right: 10px;"> 114</span>    return [];<br><span style="color: #666; margin-right: 10px;"> 115</span>  }<br><span style="color: #666; margin-right: 10px;"> 116</span>};<br><span style="color: #666; margin-right: 10px;"> 117</span></code></pre>
        </div>
    </div>
</body>
</html>